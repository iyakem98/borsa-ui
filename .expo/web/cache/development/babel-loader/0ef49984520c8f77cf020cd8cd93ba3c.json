{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport chatService from \"./chatService\";\nvar getUser = function () {\n  var _ref = _asyncToGenerator(function* () {\n    var user1 = yield AsyncStorage.getItem('user');\n    var user = JSON.parse(user1);\n    return user;\n  });\n  return function getUser() {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar chatData = 'let us see eski';\nvar initialState = {\n  chatData: \"fdlkjlkj\",\n  selllectedChat: {},\n  chattts: [],\n  isError: false,\n  isSuccess: false,\n  isLoading: false,\n  message: ''\n};\nexport var accessChat = createAsyncThunk('chat/access', function () {\n  var _ref2 = _asyncToGenerator(function* (userId, thunkAPI) {\n    console.log(userId);\n    try {\n      var token = thunkAPI.getState().auth.user.token;\n      return yield chatService.accessChat(userId, token);\n    } catch (error) {\n      var message = error.response && error.response.data && error.response.data.message || error.message || error.toString();\n      return thunkAPI.rejectWithValue(message);\n    }\n  });\n  return function (_x, _x2) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nexport var singleChat = createAsyncThunk('chat/single', function () {\n  var _ref3 = _asyncToGenerator(function* (chatId, thunkAPI) {\n    try {\n      console.log('fetching in chatSlice');\n      return yield chatService.singleChat(chatId);\n    } catch (error) {\n      var message = error.response && error.response.data && error.response.data.message || error.message || error.toString();\n      return thunkAPI.rejectWithValue(message);\n    }\n  });\n  return function (_x3, _x4) {\n    return _ref3.apply(this, arguments);\n  };\n}());\nexport var fetchChat = createAsyncThunk('chat', function () {\n  var _ref4 = _asyncToGenerator(function* (_, thunkAPI) {\n    try {\n      var token = thunkAPI.getState().auth.user.token;\n      console.log('fetching in chatSlice');\n      return yield chatService.fetchChat(token);\n    } catch (error) {\n      var message = error.response && error.response.data && error.response.data.message || error.message || error.toString();\n      return thunkAPI.rejectWithValue(message);\n    }\n  });\n  return function (_x5, _x6) {\n    return _ref4.apply(this, arguments);\n  };\n}());\nexport var tryChat = createAsyncThunk('chat/try', function () {\n  var _ref5 = _asyncToGenerator(function* (mydat, thunkAPI) {\n    try {\n      var token = thunkAPI.getState().auth.user.token;\n      console.log(\"boooo\");\n      console.log(mydat);\n      return yield chatService.tryChat(mydat, token);\n    } catch (error) {\n      var message = error.response && error.response.data && error.response.data.message || error.message || error.toString();\n      return thunkAPI.rejectWithValue(message);\n    }\n  });\n  return function (_x7, _x8) {\n    return _ref5.apply(this, arguments);\n  };\n}());\nexport var chatSlice = createSlice({\n  name: 'chat',\n  initialState: initialState,\n  reducers: {\n    reset: function reset(state) {\n      return initialState;\n    }\n  },\n  extraReducers: function extraReducers(builder) {\n    builder.addCase(accessChat.pending, function (state) {\n      state.isLoading = true;\n    }).addCase(accessChat.fulfilled, function (state, action) {\n      state.isLoading = false;\n      state.isSuccess = true;\n      state.chattts.push(action.payload);\n      state.selllectedChat.pop();\n      state.selllectedChat.push(action.payload);\n    }).addCase(accessChat.rejected, function (state, action) {\n      state.isLoading = false;\n      state.isError = true;\n      state.message = action.payload;\n    }).addCase(fetchChat.pending, function (state) {\n      state.isLoading = true;\n    }).addCase(fetchChat.fulfilled, function (state, action) {\n      state.isLoading = false;\n      state.isSuccess = true;\n      state.chattts = action.payload;\n    }).addCase(fetchChat.rejected, function (state, action) {\n      state.isLoading = false;\n      state.isError = true;\n      state.message = action.payload;\n    }).addCase(singleChat.pending, function (state) {\n      state.isLoading = true;\n    }).addCase(singleChat.fulfilled, function (state, action) {\n      state.isLoading = false;\n      state.isSuccess = true;\n      state.chattts = action.payload;\n    }).addCase(singleChat.rejected, function (state, action) {\n      state.isLoading = false;\n      state.isError = true;\n      state.message = action.payload;\n    }).addCase(tryChat.fulfilled, function (state, action) {\n      state.isLoading = false;\n      state.isSuccess = true;\n      state.chattts.push(action.payload);\n    });\n  }\n});\nvar reset = chatSlice.actions.reset;\nexport { reset };\nexport default chatSlice.reducer;","map":{"version":3,"names":["AsyncStorage","createSlice","createAsyncThunk","chatService","getUser","user1","getItem","user","JSON","parse","chatData","initialState","selllectedChat","chattts","isError","isSuccess","isLoading","message","accessChat","userId","thunkAPI","console","log","token","getState","auth","error","response","data","toString","rejectWithValue","singleChat","chatId","fetchChat","_","tryChat","mydat","chatSlice","name","reducers","reset","state","extraReducers","builder","addCase","pending","fulfilled","action","push","payload","pop","rejected","actions","reducer"],"sources":["/home/dagmawi/personal/borsa/ui/borsa-ui/src/features/chat/chatSlice.js"],"sourcesContent":["import AsyncStorage from '@react-native-async-storage/async-storage'\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\n// import { json } from 'react-router-dom'\nimport chatService from './chatService'\n\nconst getUser = async() => {\n  const user1 = await  AsyncStorage.getItem('user')\n  const user = JSON.parse(user1)\n\n  return user\n}\n\nconst chatData = 'let us see eski'\n\nconst initialState = {\n    chatData: \"fdlkjlkj\",\n    selllectedChat: {},\n    chattts: [],\n    isError: false,\n    isSuccess: false,\n    isLoading: false,\n    message: '',\n  }\n\n\n  export const accessChat = createAsyncThunk(\n    'chat/access',\n    async (userId, thunkAPI) => {\n      console.log(userId)\n      try {\n        const token = thunkAPI.getState().auth.user.token\n        return await chatService.accessChat(userId, token)\n      } catch (error) {\n        const message =\n          (error.response &&\n            error.response.data &&\n            error.response.data.message) ||\n          error.message ||\n          error.toString()\n        return thunkAPI.rejectWithValue(message)\n      }\n    }\n  )\n  \n  export const singleChat = createAsyncThunk(\n    'chat/single',\n    async (chatId, thunkAPI) => {\n      try {\n        // const token = thunkAPI.getState().auth.user.token\n  \n        console.log('fetching in chatSlice')\n        return await chatService.singleChat(chatId)\n      } catch (error) {\n        const message =\n          (error.response &&\n            error.response.data &&\n            error.response.data.message) ||\n          error.message ||\n          error.toString()\n        return thunkAPI.rejectWithValue(message)\n      }\n    }\n  )\n  export const fetchChat = createAsyncThunk(\n    'chat',\n    async (_, thunkAPI) => {\n      try {\n        const token = thunkAPI.getState().auth.user.token\n  \n        console.log('fetching in chatSlice')\n        return await chatService.fetchChat(token)\n      } catch (error) {\n        const message =\n          (error.response &&\n            error.response.data &&\n            error.response.data.message) ||\n          error.message ||\n          error.toString()\n        return thunkAPI.rejectWithValue(message)\n      }\n    }\n  )\n\n  export const tryChat = createAsyncThunk(\n    'chat/try',\n    async (mydat, thunkAPI) => {\n      try {\n        const token = thunkAPI.getState().auth.user.token\n        console.log(\"boooo\")\n        console.log(mydat)\n        return await chatService.tryChat(mydat, token)\n      } catch (error) {\n        const message =\n          (error.response &&\n            error.response.data &&\n            error.response.data.message) ||\n          error.message ||\n          error.toString()\n        return thunkAPI.rejectWithValue(message)\n      }\n    }\n  )\n  // export const deleteChat = createAsyncThunk(\n  //   'chat/remove',\n  //   async (chatID, thunkAPI) => {\n  //     try {\n  //       const token = thunkAPI.getState().auth.user.token\n       \n  //       // console.log(mydat)\n  //       return await chatService.deleteChat(chatID, token)\n  //     } catch (error) {\n  //       const message =\n  //         (error.response &&\n  //           error.response.data &&\n  //           error.response.data.message) ||\n  //         error.message ||\n  //         error.toString()\n  //       return thunkAPI.rejectWithValue(message)\n  //     }\n  //   }\n  // )\n  export const chatSlice = createSlice({\n    name: 'chat',\n    initialState,\n    reducers: {\n      reset: (state) => initialState,\n    },\n    extraReducers: (builder) => {\n      builder\n        .addCase(accessChat.pending, (state) => {\n          state.isLoading = true\n        })\n        .addCase(accessChat.fulfilled, (state, action) => {\n          state.isLoading = false\n          state.isSuccess = true\n          state.chattts.push(action.payload)\n          state.selllectedChat.pop()\n          state.selllectedChat.push(action.payload)\n        })\n        .addCase(accessChat.rejected, (state, action) => {\n          state.isLoading = false\n          state.isError = true\n          state.message = action.payload\n          \n        })\n        .addCase(fetchChat.pending, (state) => {\n          state.isLoading = true\n        })\n        .addCase(fetchChat.fulfilled, (state, action) => {\n          state.isLoading = false\n          state.isSuccess = true\n          state.chattts = action.payload\n        })\n        .addCase(fetchChat.rejected, (state, action) => {\n          state.isLoading = false\n          state.isError = true\n          state.message = action.payload\n        })\n        .addCase(singleChat.pending, (state) => {\n          state.isLoading = true\n        })\n        .addCase(singleChat.fulfilled, (state, action) => {\n          state.isLoading = false\n          state.isSuccess = true\n          state.chattts = action.payload\n        })\n        .addCase(singleChat.rejected, (state, action) => {\n          state.isLoading = false\n          state.isError = true\n          state.message = action.payload\n        })\n        .addCase(tryChat.fulfilled, (state, action) => {\n          state.isLoading = false\n          state.isSuccess = true\n          state.chattts.push(action.payload)\n        })\n        // .addCase(deleteChat.fulfilled, (state, action) => {\n        //   state.isLoading = false\n        //   state.isSuccess = true\n         \n        // })\n    },\n  })\n  \n  export const { reset } = chatSlice.actions\n  export default chatSlice.reducer\n  "],"mappings":"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"},"metadata":{},"sourceType":"module"}